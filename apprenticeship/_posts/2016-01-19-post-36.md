---
title: A successful evening
comments: true
layout: apprenticeship-post
read-time: 3
category: apprenticeship
---

Felipe was out at a client site yesterday, so I had my IPM with Jim. However, Felipe made a surprise appearance at about 6:30pm and asked me about my IPM and we ended up going through a few things in my code and pairing on some refactoring. It was great!

<!--break-->

Not only because it gave me an excuse not to go to the gym (yessss!) but also because I learnt some stuff.

I had written some slightly complicated code to calculate the winning combinations of my Tic Tac Toe game. Previously I had just hard-coded an array of each line that the board has (vertical, horizontal, diagonal) as winning combinations. Then I checked for each of those lines if index 0 equaled index 1 and index 1 equaled index 2 and if the cells were not empty and then it was a win.

I didn’t want to have the hard coded array anymore, so I changed the code.

However, this lead to a few methods returning Lists inside a Lists I already had a hunch that this probably wasn’t the best way of doing it but I didn’t really know how to change it.

Felipe suggested to use an object for each line instead the List of Integer. That makes the code a lot more readable because it makes it clearer what the list contains. 



![the code](/../../public/images/line-java-code.png "some Java code")


In the first one the reader of this code just knows that there are one or more lists of numbers inside a big list of numbers. But in the second method the reader knows straight away that it's a list of the lines of the game. 

This reminds me of one of my former colleagues, who used to lean back, stroke his beard and say to me: "hardest thing in computer science: naming things...". Ah, Louie. I should check what he's up to these days.

But even though naming things is hard, it definitely pays off because good naming of classes, methods and variables makes the code easier to understand. And if it's easier to understand for developers, it is less likely that they will write bugs.  

Felipe and Jim both encourage me to write code in a human friendly way. That means writing my method names and variable names in a way that it sounds almost like normal sentences. Here's an example of another method where I tried to do it.

Before it looked like this:

<pre><code class="language-java">
   public Game createGame() {
        GameMode gameMode = userInterface.chooseGameMode();

        if (isHumanVsComputer(gameMode)) {
            return new Game(userInterface, createNewHumanPlayer(), createNewComputerPlayer(), gameManager);
        } else {
            return new Game(userInterface, createNewHumanPlayer(), createNewHumanOpponent(), gameManager);
        }
    }
    
</code></pre>

And now I've changed it to this:

<pre><code class="language-java">
public Game createGame() {
        GameMode gameMode = userInterface.getGameModeFromUser();
        
        if (isHumanVsComputer(gameMode)) {
            return humanVsComputerGame();
        } else {
            return createHumanVsHumanGame();
        }
    }
    
</code></pre>

The second method is a lot shorter and easier to understand. 

But now let's come back to the transformation of `List<List<Integer>>` into `List<Line>`.

To achieve this we first added a new `Line` class with a `hasWinner()` method (of course we wrote the tests first). Then we updated all the types for the methods that returned `List<List<Integer>>` to return `List<Line>` instead.

We also had to update the methods that get the rows, columns and diagonals because previously I had iterated over the array of arrays and used the indexes to pull out the cells of the actual board state and then compared them. But now we were getting the lines of the actual board state straight way and checking if any of those lines is a winner. It’s a bit hard to explain but trust me, the code is a lot simpler now.

I think that was the time when Felipe initiated a bet with me. He was confident that all tests would be green. I wasn’t. Even in my short career as a developer, I know that things are never that easy and never *just work*. Yep, and that won me a beer because of course the tests didn’t all pass.

We had to fix the calculations of the methods that got the rows, columns and diagonals.

But then it all worked!

Altogether a successful evening. To sum up the results:

- my code reads much better and is easier to understand

- I learnt some stuff

- I had an excuse not to go to the gym

- I won a beer